Got it. I’ll dig into how Windows 11 handles HID gamepad devices, especially via BLE HID over GATT, focusing on the number of axes and buttons supported, HID descriptor limits, and when you’d need to write a custom driver. I’ll also look into how commercial HOTAS devices expose more inputs and whether they use custom drivers or extended HID descriptors.

I’ll get back to you with technical details and any best practices or workarounds for maximizing HID input on Windows.

# HID Gamepads on Windows 11: Axes, Buttons, and BLE HID Considerations

## Introduction

Windows 11 supports HID-compliant game controllers (including BLE HID over GATT gamepads) via its standard HID class driver. However, practical limits exist on how many axes and buttons the system will recognize by default. This report examines HID descriptor structures for gamepads, the maximum inputs Windows will handle without custom drivers, and how high-input-count devices (like HOTAS systems) work around these limits. We also outline what a custom driver would entail if you need to exceed these constraints.

## HID Gamepad Descriptor Basics

A HID **Report Descriptor** defines a controller’s axes and buttons. For a gamepad or joystick, the descriptor typically uses the **Generic Desktop** usage page (`Usage Page 0x01`) with a top-level `Usage` of **Joystick** (0x04) or **Game Pad** (0x05). Inside the descriptor’s **Application Collection**, individual axes are defined as analog **Input** elements with specific **Usages** (e.g. X, Y, Z, Rx, Ry, Rz, Slider, Dial, Wheel) and digital buttons are defined as bitfield inputs on the **Button** usage page. For example, a simple HID report descriptor might declare: X and Y axes (e.g. 16-bit each), a throttle axis, and a set of buttons. Each report from the device will then contain the current values for those axes and the state of each button.

In HID, there is no hard-coded limit on the number of axes or buttons in a descriptor – you can theoretically define many items as long as the report fits within the maximum size (e.g. 64 bytes for USB full-speed HID, larger for Bluetooth LE with extended MTU). The HID Usage Tables define standard usages for common controls. The Generic Desktop page provides codes for X, Y, Z, Rx, Ry, Rz, Slider, Dial, and Wheel axes, and a Hat Switch. Beyond these, additional analog inputs can be represented using other usage pages (e.g. the Simulation Controls page for rudder, throttle, etc.) or even vendor-defined usages if needed. In other words, the HID spec itself doesn’t intrinsically cap you at 8 axes – you could enumerate more axes by using multiple usage pages or repeating similar usages in the descriptor. **However, how Windows interprets and exposes those inputs is another story**, as we’ll see next.

## Windows Limits on Axes and Buttons (Using the Generic Driver)

**Windows’ built-in game controller driver imposes practical limits** on the number of axes and buttons it will handle per HID device without additional software. These limits trace back to legacy APIs and data structures in Windows:

- **DirectInput (and WinMM Joystick APIs)** – Historically, the Windows multimedia joystick API (joyGetPosEx) defined a fixed structure with at most 6 axes and 32 buttons (a 32-bit button bitmask) ([Windows HID - max axes - Q Light Controller+](https://www.forum.qlcplus.org/viewtopic.php?t=7016#:~:text=http%3A%2F%2Fmsdn.microsoft.com%2Fen)). DirectInput (introduced with DirectX) expanded support, standardizing **up to 8 analog axes and 128 buttons** per device ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)). In fact, DirectInput’s specification allows 8 axes, 128 buttons, and 4 POV hat switches on a single game controller ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)). Modern Windows still uses these limits for HID gamepad devices by default. If a HID report descriptor defines more than 8 axes, the additional ones will typically be ignored or inaccessible to most games/software using standard Win32 game APIs. Likewise, buttons beyond the first 128 may not be recognized via DirectInput.

- **Game Controllers Control Panel UI** – The classic _joy.cpl_ control panel (Game Controllers) is even more limited in display: it will only show up to **7 axes and 32 buttons** in the testing screen ([Support more Buttons and Axis in Gamepad mode? · Issue #8 · NicoHood/HID · GitHub](https://github.com/NicoHood/HID/issues/8#:~:text=The%207%20axis%20limit%20and,device%20limit.%20Especially)). (The UI has slots for X, Y, Z, Rx, Ry, Rz, and Slider axes – 6 visible plus possibly one more – hence “7”, and a fixed 32-button view). This is a UI limitation of the calibration panel. Internally, Windows can handle one more axis (8 total) and more buttons, but anything above 32 won’t appear in that UI ([Support more Buttons and Axis in Gamepad mode? · Issue #8 · NicoHood/HID · GitHub](https://github.com/NicoHood/HID/issues/8#:~:text=The%207%20axis%20limit%20and,device%20limit.%20Especially)). The HID driver still reports changes on those extra inputs if an application queries them directly.

- **XInput** – It’s worth noting that XInput (the API for Xbox 360/One style controllers) has its own fixed layout unrelated to HID descriptors. XInput supports only 4 analog axes (the two thumbsticks, left/right trigger each treated as one axis), a POV d-pad, and 10–14 buttons, total. XInput devices are a separate class (often not standard HID or using vendor drivers), so for a BLE HID gamepad you’d likely be using the HID path, not XInput. Just be aware that many games that use XInput will assume the XInput limits. For custom devices with lots of inputs, DirectInput or raw HID is the route.

The table below summarizes these limits:

| Interface / API                  | Max Axes per Device                                            | Max Buttons per Device                                                                                                                                                                                                                             | POV Hat Switches                                                                                                                                                                                                  |
| -------------------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **HID Spec Theoretical**         | No fixed limit (limited by descriptor size and defined usages) | No fixed limit (HID report can include many fields)                                                                                                                                                                                                | No fixed limit (multiple hats possible)                                                                                                                                                                           |
| **WinMM Joystick (joyGetPosEx)** | 6 axes                                                         | 32 buttons (32-bit bitmask) ([Windows HID - max axes - Q Light Controller+](https://www.forum.qlcplus.org/viewtopic.php?t=7016#:~:text=http%3A%2F%2Fmsdn.microsoft.com%2Fen))                                                                      | 1 POV (as a single 32-bit value)                                                                                                                                                                                  |
| **DirectInput (DirectX)**        | 8 axes                                                         | 128 buttons ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)) (legacy apps often only use 32) | 4 POV hats ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)) |
| **XInput (Xbox Controllers)**    | 4 axes (+2 triggers)                                           | 10 buttons (+ Start/Back/Guide) ≈ 14 total                                                                                                                                                                                                         | 1 POV (d-pad)                                                                                                                                                                                                     |
| **Windows Game Controller UI**   | 7 axes (displayed)                                             | 32 buttons (displayed) ([Support more Buttons and Axis in Gamepad mode? · Issue #8 · NicoHood/HID · GitHub](https://github.com/NicoHood/HID/issues/8#:~:text=The%207%20axis%20limit%20and,device%20limit.%20Especially))                           | 1 POV (displayed)                                                                                                                                                                                                 |

**In practice**, a standard HID gamepad device on Windows will reliably support up to 8 analog axes and 128 buttons without needing any custom driver ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)). Many modern games (especially flight sims, racing sims, etc.) query DirectInput or raw HID and can see all 8 axes and up to 128 buttons. For example, it’s noted that _DCS World_ can handle the full 8 axes, 128 buttons, and multiple POV hats on a single device ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)). However, some older or simpler software might only read the first 4 or 6 axes or assume a 32-button limit, so there is a compatibility aspect.

**BLE HID over GATT** does not inherently change these limits. A Bluetooth LE gamepad still uses a HID descriptor that Windows’ HID driver will parse in the same way. As long as the BLE HID device exposes a standard gamepad/joystick descriptor, Windows 11 will treat it like any USB HID game controller. The main BLE-specific consideration is **report size and bandwidth**: BLE HID (HID over GATT, also known as HoG) sends reports over ATT characteristics, which have a default MTU of 23 bytes (20 bytes payload). A report with many axes/buttons could exceed that. For instance, 24 axes at 16 bits each is 48 bytes; add dozens of buttons and you could be in the 60–70 byte range. To accommodate this, you’d need to ensure your BLE connection supports an increased ATT MTU (BLE 4.2+ allows negotiation for larger MTUs). Otherwise, the report will be fragmented. Windows’ Bluetooth HID driver can handle larger reports if the transport permits, but you should test high report sizes for latency and reliability. In short, **HID over GATT can carry a large descriptor, but make sure to use BLE5 features (like Data Length Extension and higher MTU) for a 24-axis report**.

## High-Input-Count Devices (HOTAS, Custom Controllers) Workarounds

Enthusiast devices like HOTAS (Hands On Throttle And Stick systems), racing sim controllers, and custom cockpit panels often require more than 8 axes or more than 32 buttons. Manufacturers employ a few strategies to bypass Windows’ generic limitations:

- **Multiple HID Devices (Composite or Multiple Collections)** – One common solution is to split the controls into multiple logical devices. For example, a throttle quadrant and joystick might enumerate as two separate HID gamepad devices. Even within a single USB device, the firmware can expose multiple HID interfaces or multiple top-level collections so that Windows sees two “joysticks”. Each one stays under the 8-axis/128-button limit. This is exactly what some high-end devices and DIY controller boards do. For instance, Virpil’s configurable joystick firmware allows splitting a physical throttle into two virtual DirectInput devices – e.g. one device carrying 6 axes and 32 buttons, and a second device with the remaining buttons (say, 0 axes and another 28 buttons) ([HOTAS Joystick input - Godot Forums](https://godotforums.org/d/31073-hotas-joystick-input#:~:text=I%20set%20my%20throttle%20in,6%20axes%20and%2032)). By doing so, no single device exceeds the limit that confuses games, and games that support multiple controllers can still bind inputs from both. Another example is the B256A13 “High Input Count” joystick controller board, which presents two virtual joysticks to accommodate an enormous number of buttons: it has 124 buttons on each of two virtual devices (total 248 buttons) while keeping each device within 128-button DirectInput bounds ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)). Splitting across devices is a straightforward hardware/firmware approach that avoids needing any special Windows driver – the standard HID class driver handles each sub-device normally.

- **Vendor Drivers and Software** – Some companies ship custom drivers or software layers to handle advanced features. Notably, Thrustmaster’s TARGET software combines multiple physical devices (e.g. HOTAS stick + throttle + pedals) into one virtual device. That virtual device is actually driven by a custom driver which may present as an HID device with a tailored descriptor. Often, though, even these virtual combined devices stick to the 8 axis, 32 or 128 button limit of DirectInput. For example, Thrustmaster’s TARGET will merge devices but still presents a single virtual joystick that fits in DirectInput’s standard range (if a device has more than 32 buttons, TARGET might map some buttons to keyboard keys or split into multiple virtual devices behind the scenes). Similarly, devices with their own vendor driver might support things like mode switches, shift-states, or macros that go beyond pure HID capabilities. But under the hood, many “advanced” drivers rely on HID for basic data and then do custom processing or expose multiple devices.

- **Extended HID Usage or Reports** – It’s theoretically possible for a device to pack additional data in its HID reports using vendor-defined usage or obscure HID usages. For example, a device could include outputs or feature reports that are read by a vendor’s software (not by the generic game APIs). Some flight sim panels use custom HID interfaces that a companion application reads for telemetry or LED controls. However, for pure input (axes/buttons), most devices stick to the standard HID inputs and use the above methods (multiple interfaces or custom drivers) rather than define a completely new HID usage that Windows wouldn’t know how to map. The reason is that if the goal is to have a game see the input, it almost always has to appear as a standard game controller input. A non-standard usage would be invisible to games unless a special middleware reads it.

In summary, high-count controllers either **divide inputs across several HID devices** or **use an intermediate software layer**. If you plug such hardware into Windows 11 without installing anything, generally you’ll see multiple HID-compliant game controllers in Device Manager (one for each 8 axes/128-button group). The device’s configuration utility typically orchestrates this.

## Exceeding Limits with a Custom Driver

If you truly need to support a single game controller with more than 8 axes or more than the DirectInput limits, a custom driver or software solution is required. There are a few approaches a developer can consider:

- **Write a Custom HID Client Driver (HID Minidriver)**: Windows allows third-party HID drivers to replace or augment the standard HID class driver for a particular device. A _HID minidriver_ works in tandem with `hidclass.sys`. By writing one (usually via the Windows Driver Framework, KMDF), you could take complete control of how the device’s reports are interpreted. For example, a custom HID driver could expose additional device capabilities, combine multiple HID collections into one logical device, or even translate vendor-defined usages into synthetic standard usages. However, this is a non-trivial task. You’d be writing a kernel-mode driver and you’d need to get it signed. The driver would bind to your device’s VID/PID (or to a virtual device you create) and register with the HID class driver ([Minidrivers and the HID Class Driver - Windows drivers | Microsoft Learn](https://learn.microsoft.com/en-us/windows-hardware/drivers/hid/minidriver-operations#:~:text=A%20HID%20minidriver%20binds%20its,The%20registration%20operation)) ([Minidrivers and the HID Class Driver - Windows drivers | Microsoft Learn](https://learn.microsoft.com/en-us/windows-hardware/drivers/hid/minidriver-operations#:~:text=,that%20an%20input%20device%20supports)). In practice, very few developers go this route unless absolutely necessary because it increases complexity and maintenance cost. The HID class driver in Windows already handles parsing HID reports and exposing them to user-mode via common APIs; a custom minidriver typically would only be used if the device doesn’t fit the standard HID model at all or if you need to present a virtual composite device.

- **Virtual HID Device in Software (User-Mode Injection)**: A more popular approach is to use a software layer that reads input from your physical device (using one or more HID interfaces) and then feeds that into a **virtual device** that the system and games see. This is effectively what Thrustmaster TARGET and similar programs do. There are open-source examples like **vJoy** and **ViGEm** that implement virtual joystick devices. **vJoy**, for instance, is a signed virtual joystick driver that can create up to 16 virtual HID joystick devices, each with a configurable number of axes and buttons (by default up to 8 axes, 128 buttons, and 4 POV hats per device) ([vJoy download | SourceForge.net](https://sourceforge.net/projects/vjoystick/#:~:text=,PPJoy%20replacement)). Your application can read your BLE HID device’s 24 axes and countless buttons, then split and feed them into one or multiple vJoy virtual devices. From the perspective of any game or standard API, it will just see normal DirectInput controllers (limited to 8 axes/128 buttons each) – but you control how the physical inputs map into those. ViGEm is similar but often used to emulate Xbox controllers (XInput devices) or other console controllers for compatibility with games expecting those. If you needed to appear specifically as an Xbox 360 controller (to use XInput-only games), note that you’d have to sacrifice the number of axes/buttons to fit the XInput limits. So typically, virtual HID (DirectInput) devices are used for high-count controllers instead of virtual XInput in these scenarios.

- **HID Filter Driver**: Another kernel option is writing a filter driver that sits above or below the HID class. An _upper filter_ could intercept the input reports from the device and modify them before they reach the system or the application. For example, one could imagine an upper filter that takes a single device’s report (with 24 axes) and splits it into two virtual device PDOs (physical device objects) such that it enumerates as two devices. This is a complex solution and essentially amounts to writing a bus driver. A _lower filter_ might modify the report descriptor on the fly (for instance, hiding certain inputs or renaming usages) – but it can’t magically expand system limits. Filter drivers are usually used for things like tweaking hardware quirks, not for extending fundamental API limits.

For most developers, leveraging an existing solution like **vJoy** or writing a user-mode feeder for a virtual device is the practical route. For instance, you could create a service that connects to your BLE GATT gamepad (using Windows Bluetooth APIs), reads the 24-axis data, and then sends it to a vJoy virtual joystick (or two virtual joysticks) via the vJoy API. This way, your hardware can be fully utilized, and you don’t have to write any kernel driver from scratch – you’d reuse vJoy’s driver which is designed for exactly this kind of scenario.

If you choose to write your own virtual HID driver, Microsoft provides samples like **vhidmini2** in the Windows Driver Samples. Those show how to create a virtual HID device and supply a custom report descriptor and input reports from kernel mode. Essentially, your driver would simulate a HID device that has, say, 24 axes. But remember, even if the driver exposes 24 axes, DirectInput will likely only see 8 of them unless you also implement a custom interface to user-mode. In other words, a custom driver could _bypass_ the HID <-> DirectInput mapping by perhaps exposing a proprietary interface or multiple devices, but it can’t force DirectInput to suddenly allow 24 axes on one device handle. So, even a custom driver might end up presenting multiple logical devices if you want general compatibility. It could, however, present a specialized API or memory mapping for a specific application to consume all 24 axes as one unit (useful if you’re writing the app as well).

### Driver Duties for Extended HID Support

To summarize what a custom driver (minidriver or virtual device) would need to do:

- **Define a custom HID Report Descriptor** that includes all the desired axes and buttons (possibly using multiple collections or reports). This descriptor might use vendor-specific usage for axes beyond the standard ones so that they are uniquely identifiable. The driver would report this descriptor to the system. (Normally, in a physical device, the device firmware provides the descriptor; in a virtual driver, you programmatically supply it.)

- **Handle input reports** from the hardware (if a minidriver for a real device) or from a user-mode feeder (if a virtual device). For a real BLE device, a minidriver might interface with the Bluetooth stack or replace the built-in Bluetooth HID driver for that device. It would retrieve the 24-axis reports from the device and then feed the data into the HID class driver as input data. For a purely virtual device, your driver might generate input reports based on some shared memory or IOCTL from user-mode (this is how vJoy works: a user-mode feeder app writes into the vJoy driver, which then issues input reports as if hardware did it).

- **Potentially expose multiple child devices**: If you go beyond the DirectInput limits, your driver might register multiple HID collections. For example, your single physical device’s driver could create two child HID collections (each with a subset of axes/buttons) so that Windows enumerates two joystick devices. This is similar to the firmware-level composite approach but done in software. The HID class driver actually does support one physical device exposing several HID collections (it creates a PDO for each) ([Minidrivers and the HID Class Driver - Windows drivers | Microsoft Learn](https://learn.microsoft.com/en-us/windows-hardware/drivers/hid/minidriver-operations#:~:text=,by%20an%20underlying%20input%20device)). Your custom driver would just need to advertise the descriptor in a way that has multiple Application Collections for the different groups of controls.

- **Bypass standard game APIs (if needed)**: In extreme cases, if you wanted _one_ logical device with >8 axes in one, you might have to also provide a custom interface to user-mode, because standard DirectInput won’t query beyond 8. For instance, you could expose a device interface for a custom API or even a memory mapping that a specialized client library uses to read all 24 axes together. This is only useful if you are developing the game/application in tandem or if you provide an SDK to game developers – not really feasible for general compatibility with existing software.

Most developers find that **sticking within Windows’ HID limits per device** (8 axes, 128 buttons) and creatively splitting or mapping inputs is the path of least resistance. It ensures that _any_ DirectInput-aware game can use your device(s) without requiring special support.

## References and Further Reading

- Microsoft documentation on the legacy joystick API and DirectInput capabilities shows the historical axis/button limits (e.g., joyGetDevCaps and DirectInput device objects) – these legacy structures defined 6 axes, 32 buttons max ([Windows HID - max axes - Q Light Controller+](https://www.forum.qlcplus.org/viewtopic.php?t=7016#:~:text=http%3A%2F%2Fmsdn.microsoft.com%2Fen)), while DirectInput extended it to 8 axes and 128 buttons ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)).
- A Windows HID driver developer confirmed that the Windows game controller control panel is limited to 7 axes and 32 buttons for display, even if the OS can handle more ([Support more Buttons and Axis in Gamepad mode? · Issue #8 · NicoHood/HID · GitHub](https://github.com/NicoHood/HID/issues/8#:~:text=The%207%20axis%20limit%20and,device%20limit.%20Especially)).
- Community discussions (e.g., flight simulator forums) further confirm DirectInput’s 8-axis, 128-button support and note that many games only utilize the first 32 buttons unless updated ([Support more Buttons and Axis in Gamepad mode? · Issue #8 · NicoHood/HID · GitHub](https://github.com/NicoHood/HID/issues/8#:~:text=The%207%20axis%20limit%20and,device%20limit.%20Especially)) ([Joystick Controller B256A13 - Home Cockpits - ED Forums](https://forum.dcs.world/topic/65149-joystick-controller-b256a13/#:~:text=The%2032%20button%20limit%20is,are%20no%20limitations%20on%20the)).
- **FlightGear**’s documentation notes the 32-button limit of the classic Windows joystick driver and explains that devices with more buttons require reading via the HID interface instead ([FlightGear forum • View topic - [HOWTO] Use more than 32 buttons on Windows via HID](https://forum.flightgear.org/viewtopic.php?f=24&t=43132&p=430225#:~:text=The%20Windows%20joystick%20driver%20is,to%20certain%20essential%20data%20structures)).
- **vJoy** project documentation illustrates a practical implementation of a virtual HID device driver supporting up to 8 axes and 128 buttons ([vJoy download | SourceForge.net](https://sourceforge.net/projects/vjoystick/#:~:text=,PPJoy%20replacement)) – a useful reference if considering a custom virtual device.
